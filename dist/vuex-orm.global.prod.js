var VuexORM=function(){"use strict";function t(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var e=t((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),n=t((function(t){var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)})),r=function(t){return"object"==typeof t?null!==t:"function"==typeof t},i=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t},o=function(t){try{return!!t()}catch(t){return!0}},a=!o((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),u=e.document,s=r(u)&&r(u.createElement),c=function(t){return s?u.createElement(t):{}},h=!a&&!o((function(){return 7!=Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a})),f=Object.defineProperty,l={f:a?Object.defineProperty:function(t,e,n){if(i(t),e=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}(e,!0),i(n),h)try{return f(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},d=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},p=a?function(t,e,n){return l.f(t,e,d(1,n))}:function(t,e,n){return t[e]=n,t},y={}.hasOwnProperty,v=function(t,e){return y.call(t,e)},m=0,g=Math.random(),b=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++m+g).toString(36))},w=t((function(t){var r="__core-js_shared__",i=e[r]||(e[r]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),K=w("native-function-to-string",Function.toString),O=t((function(t){var r=b("src"),i="toString",o=(""+K).split(i);n.inspectSource=function(t){return K.call(t)},(t.exports=function(t,n,i,a){var u="function"==typeof i;u&&(v(i,"name")||p(i,"name",n)),t[n]!==i&&(u&&(v(i,r)||p(i,r,t[n]?""+t[n]:o.join(String(n)))),t===e?t[n]=i:a?t[n]?t[n]=i:p(t,n,i):(delete t[n],p(t,n,i)))})(Function.prototype,i,(function(){return"function"==typeof this&&this[r]||K.call(this)}))})),R=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},k="prototype",M=function(t,r,i){var o,a,u,s,c=t&M.F,h=t&M.G,f=t&M.S,l=t&M.P,d=t&M.B,y=h?e:f?e[r]||(e[r]={}):(e[r]||{})[k],v=h?n:n[r]||(n[r]={}),m=v[k]||(v[k]={});for(o in h&&(i=r),i)u=((a=!c&&y&&void 0!==y[o])?y:i)[o],s=d&&a?R(u,e):l&&"function"==typeof u?R(Function.call,u):u,y&&O(y,o,u,t&M.U),v[o]!=u&&p(v,o,s),l&&m[o]!=u&&(m[o]=u)};e.core=n,M.F=1,M.G=2,M.S=4,M.P=8,M.B=16,M.W=32,M.U=64,M.R=128;var I=M,$={}.toString,F=function(t){return $.call(t).slice(8,-1)},S=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==F(t)?t.split(""):Object(t)},A=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},E=function(t){return S(A(t))},x=Math.ceil,j=Math.floor,P=function(t){return isNaN(t=+t)?0:(t>0?j:x)(t)},C=Math.min,_=function(t){return t>0?C(P(t),9007199254740991):0},B=Math.max,T=Math.min,H=function(t){return function(e,n,r){var i,o=E(e),a=_(o.length),u=function(t,e){return(t=P(t))<0?B(t+e,0):T(t,e)}(r,a);if(t&&n!=n){for(;a>u;)if((i=o[u++])!=i)return!0}else for(;a>u;u++)if((t||u in o)&&o[u]===n)return t||u||0;return!t&&-1}},U=t((function(t){var n=w("wks"),r=e.Symbol,i="function"==typeof r;(t.exports=function(t){return n[t]||(n[t]=i&&r[t]||(i?r:b)("Symbol."+t))}).store=n})),z=U("unscopables"),N=Array.prototype;null==N[z]&&p(N,z,{});var V=function(t){N[z][t]=!0},D=H(!0);I(I.P,"Array",{includes:function(t){return D(this,t,arguments.length>1?arguments[1]:void 0)}}),V("includes"),n.Array.includes;var W=w("keys"),L=function(t){return W[t]||(W[t]=b(t))},G=H(!1),q=L("IE_PROTO"),Q="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),J=Object.keys||function(t){return function(t,e){var n,r=E(t),i=0,o=[];for(n in r)n!=q&&v(r,n)&&o.push(n);for(;e.length>i;)v(r,n=e[i++])&&(~G(o,n)||o.push(n));return o}(t,Q)},Y={f:Object.getOwnPropertySymbols},X={f:{}.propertyIsEnumerable},Z=function(t){return Object(A(t))},tt=Object.assign,et=!tt||o((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=tt({},t)[n]||Object.keys(tt({},e)).join("")!=r}))?function(t,e){for(var n=Z(t),r=arguments.length,i=1,o=Y.f,u=X.f;r>i;)for(var s,c=S(arguments[i++]),h=o?J(c).concat(o(c)):J(c),f=h.length,l=0;f>l;)s=h[l++],a&&!u.call(c,s)||(n[s]=c[s]);return n}:tt;I(I.S+I.F,"Object",{assign:et}),n.Object.assign;var nt=X.f,rt=function(t){return function(e){for(var n,r=E(e),i=J(r),o=i.length,u=0,s=[];o>u;)n=i[u++],a&&!nt.call(r,n)||s.push(t?[n,r[n]]:r[n]);return s}},it=rt(!0);I(I.S,"Object",{entries:function(t){return it(t)}}),n.Object.entries;var ot=rt(!1);I(I.S,"Object",{values:function(t){return ot(t)}}),n.Object.values;var at=U("match"),ut=function(t,e,n){if(r(i=e)&&(void 0!==(o=i[at])?o:"RegExp"==F(i)))throw TypeError("String#"+n+" doesn't accept regex!");var i,o;return String(A(t))},st=U("match"),ct="startsWith",ht=""[ct];I(I.P+I.F*function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[st]=!1,!"/./"[t](e)}catch(t){}}return!0}(ct),"String",{startsWith:function(t){var e=ut(this,t,ct),n=_(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return ht?ht.call(e,r,n):e.slice(n,n+r.length)===r}}),n.String.startsWith;var ft={},lt=a?Object.defineProperties:function(t,e){i(t);for(var n,r=J(e),o=r.length,a=0;o>a;)l.f(t,n=r[a++],e[n]);return t},dt=e.document,pt=dt&&dt.documentElement,yt=L("IE_PROTO"),vt=function(){},mt="prototype",gt=function(){var t,e=c("iframe"),n=Q.length;for(e.style.display="none",pt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),gt=t.F;n--;)delete gt[mt][Q[n]];return gt()},bt=Object.create||function(t,e){var n;return null!==t?(vt[mt]=i(t),n=new vt,vt[mt]=null,n[yt]=t):n=gt(),void 0===e?n:lt(n,e)},wt=l.f,Kt=U("toStringTag"),Ot=function(t,e,n){t&&!v(t=n?t:t.prototype,Kt)&&wt(t,Kt,{configurable:!0,value:e})},Rt={};p(Rt,U("iterator"),(function(){return this}));var kt,Mt=function(t,e,n){t.prototype=bt(Rt,{next:d(1,n)}),Ot(t,e+" Iterator")},It=L("IE_PROTO"),$t=Object.prototype,Ft=Object.getPrototypeOf||function(t){return t=Z(t),v(t,It)?t[It]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?$t:null},St=U("iterator"),At=!([].keys&&"next"in[].keys()),Et="keys",xt="values",jt=function(){return this},Pt=(kt=!0,function(t,e){var n,r,i=String(A(t)),o=P(e),a=i.length;return o<0||o>=a?kt?"":void 0:(n=i.charCodeAt(o))<55296||n>56319||o+1===a||(r=i.charCodeAt(o+1))<56320||r>57343?kt?i.charAt(o):n:kt?i.slice(o,o+2):r-56320+(n-55296<<10)+65536});!function(t,e,n,r,i,o,a){Mt(n,e,r);var u,s,c,h=function(t){if(!At&&t in y)return y[t];switch(t){case Et:case xt:return function(){return new n(this,t)}}return function(){return new n(this,t)}},f=e+" Iterator",l=i==xt,d=!1,y=t.prototype,v=y[St]||y["@@iterator"]||i&&y[i],m=v||h(i),g=i?l?h("entries"):m:void 0,b="Array"==e&&y.entries||v;if(b&&(c=Ft(b.call(new t)))!==Object.prototype&&c.next&&(Ot(c,f,!0),"function"!=typeof c[St]&&p(c,St,jt)),l&&v&&v.name!==xt&&(d=!0,m=function(){return v.call(this)}),(At||d||!y[St])&&p(y,St,m),ft[e]=m,ft[f]=jt,i)if(u={values:l?m:h(xt),keys:o?m:h(Et),entries:g},a)for(s in u)s in y||O(y,s,u[s]);else I(I.P+I.F*(At||d),e,u)}(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=Pt(e,n),this._i+=t.length,{value:t,done:!1})}));var Ct=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}},_t=U("iterator"),Bt=Array.prototype,Tt=function(t,e,n){e in t?l.f(t,e,d(0,n)):t[e]=n},Ht=U("toStringTag"),Ut="Arguments"==F(function(){return arguments}()),zt=U("iterator"),Nt=n.getIteratorMethod=function(t){if(null!=t)return t[zt]||t["@@iterator"]||ft[function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Ht))?n:Ut?F(e):"Object"==(r=F(e))&&"function"==typeof e.callee?"Arguments":r}(t)]},Vt=U("iterator"),Dt=!1;try{var Wt=[7][Vt]();Wt.return=function(){Dt=!0},Array.from(Wt,(function(){throw 2}))}catch(t){}I(I.S+I.F*!function(t,e){if(!e&&!Dt)return!1;var n=!1;try{var r=[7],i=r[Vt]();i.next=function(){return{done:n=!0}},r[Vt]=function(){return i},t(r)}catch(t){}return n}((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,r,i,o,a=Z(t),u="function"==typeof this?this:Array,s=arguments.length,c=s>1?arguments[1]:void 0,h=void 0!==c,f=0,l=Nt(a);if(h&&(c=R(c,s>2?arguments[2]:void 0,2)),null!=l&&(u!=Array||(void 0===(o=l)||ft.Array!==o&&Bt[_t]!==o)))for(i=l.call(a),n=new u;!(r=i.next()).done;f++)Tt(n,f,h?Ct(i,c,[r.value,f],!0):r.value);else for(n=new u(e=_(a.length));e>f;f++)Tt(n,f,h?c(a[f],f):a[f]);return n.length=f,n}}),n.Array.from;var Lt=Array.isArray||function(t){return"Array"==F(t)},Gt=U("species"),qt=function(t,e){return new(function(t){var e;return Lt(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!Lt(e.prototype)||(e=void 0),r(e)&&null===(e=e[Gt])&&(e=void 0)),void 0===e?Array:e}(t))(e)},Qt=function(t,e){var n=1==t,r=2==t,i=3==t,o=4==t,a=6==t,u=5==t||a,s=e||qt;return function(e,c,h){for(var f,l,d=Z(e),p=S(d),y=R(c,h,3),v=_(p.length),m=0,g=n?s(e,v):r?s(e,0):void 0;v>m;m++)if((u||m in p)&&(l=y(f=p[m],m,d),t))if(n)g[m]=l;else if(l)switch(t){case 3:return!0;case 5:return f;case 6:return m;case 2:g.push(f)}else if(o)return!1;return a?-1:i||o?o:g}}(5),Jt="find",Yt=!0;Jt in[]&&Array(1)[Jt]((function(){Yt=!1})),I(I.P+I.F*Yt,"Array",{find:function(t){return Qt(this,t,arguments.length>1?arguments[1]:void 0)}}),V(Jt),n.Array.find;var Xt=function(){function t(){}return t.register=function(t){this.store=t},t}(),Zt=function(t,e){return Zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Zt(t,e)};function te(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Zt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var ee=function(){return ee=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ee.apply(this,arguments)};function ne(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,u)}s((r=r.apply(t,e||[])).next())}))}function re(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function ie(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function oe(t){return Array.isArray(t)}function ae(t){return oe(t)?t.length:Object.keys(t).length}function ue(t,e){var n=Object.assign({},t);return Object.keys(t).reduce((function(n,r){return n[r]=e(t[r],r,t),n}),n)}function se(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=void 0!==e,a=null===e,u=e==e;if("number"==typeof t&&"number"==typeof e||(t=String(t),e=String(e)),!a&&t>e||r&&o&&u||!n&&u||!i)return 1;if(!r&&t<e||a&&n&&i||!o&&i||!u)return-1}return 0}var ce={isArray:oe,size:ae,isEmpty:function(t){return 0===ae(t)},forOwn:function(t,e){Object.keys(t).forEach((function(n){return e(t[n],n,t)}))},map:function(t,e){var n=[];for(var r in t)n.push(e(t[r],r,t));return n},mapValues:ue,keyBy:function(t,e){var n={};return t.forEach((function(t){n[t[e]]=t})),n},orderBy:function(t,e,n){var r=-1,i=t.map((function(t){return{criteria:e.map((function(e){return"function"==typeof e?e(t):t[e]})),index:++r,value:t}}));return function(t,e){var n=t.length;t.sort(e);var r=[];for(;n--;)r[n]=t[n].value;return r}(i,(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,a=i.length,u=n.length;for(;++r<a;){var s=se(i[r],o[r]);if(s)return r>=u?s:s*("desc"===n[r]?-1:1)}return t.index-e.index}(t,e,n)}))},groupBy:function(t,e){return t.reduce((function(t,n){var r=e(n);return void 0===t[r]&&(t[r]=[]),t[r].push(n),t}),{})},cloneDeep:function t(e){if(null===e)return e;if(oe(e)){var n=[];return e.forEach((function(t){return n.push(t)})),n.map((function(e){return t(e)}))}if("object"==typeof e&&e!=={}){var r=ee({},e);return Object.keys(r).forEach((function(e){return r[e]=t(r[e])})),r}return e}},he=function(){function t(){}return t.make=function(){return this.count++,"".concat(this.prefix).concat(this.count)},t.reset=function(){this.count=0},t.count=0,t.prefix="$uid",t}(),fe=function(t){this.model=t},le=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.isNullable=!1,i.value=n,i.mutator=r,i}return te(e,t),e.prototype.nullable=function(){return this.isNullable=!0,this},e.prototype.mutate=function(t,e){var n=this.mutator||this.model.mutators()[e];return n?n(t):t},e}(fe),de=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return te(e,t),e.prototype.make=function(t,e,n){var r=t=void 0!==t?t:this.value;return"function"==typeof t&&(r=t()),this.mutate(r,n)},e}(le),pe=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return te(e,t),e.prototype.make=function(t,e,n){return this.mutate(this.fix(t),n)},e.prototype.fix=function(t){return void 0===t?this.value:"string"==typeof t||null===t&&this.isNullable?t:t+""},e}(le),ye=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return te(e,t),e.prototype.make=function(t,e,n){return this.mutate(this.fix(t),n)},e.prototype.fix=function(t){return void 0===t?this.value:"number"==typeof t?t:"string"==typeof t?parseFloat(t):"boolean"==typeof t?t?1:0:null===t&&this.isNullable?t:0},e}(le),ve=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return te(e,t),e.prototype.make=function(t,e,n){return this.mutate(this.fix(t),n)},e.prototype.fix=function(t){if(void 0===t)return this.value;if("boolean"==typeof t)return t;if("string"==typeof t){if(0===t.length)return!1;var e=parseInt(t,0);return!!isNaN(e)||!!e}return"number"==typeof t?!!t:!(null!==t||!this.isNullable)&&t},e}(le),me=function(t){function e(e,n){return t.call(this,e,n)||this}return te(e,t),e.prototype.make=function(t){return"number"==typeof t||"string"==typeof t?t:"function"==typeof this.value?this.value():he.make()},e}(le),ge=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return te(e,t),e.prototype.getRelation=function(t,e,n){var r=t.newQuery(e);return n.forEach((function(t){t(r)})),r},e.prototype.getKeys=function(t,e){return t.reduce((function(t,n){return null===n[e]||void 0===n[e]||t.push(n[e]),t}),[])},e.prototype.mapSingleRelations=function(t,e){var n=new Map;return t.forEach((function(t){var r=t[e];!n.get(r)&&n.set(r,t)})),n},e.prototype.mapManyRelations=function(t,e){var n=new Map;return t.forEach((function(t){var r=t[e],i=n.get(r);i||(i=[],n.set(r,i)),i.push(t)})),n},e.prototype.mapRelationsByOrders=function(t,e,n,r){var i={};return e.forEach((function(e,o){t.filter((function(t){return t[r]===o})).forEach((function(t){var r=t[n];i[r]||(i[r]=[]),i[r]=i[r].concat(e)}))})),i},e.prototype.isOneRelation=function(t){return!oe(t)&&null!==t&&"object"==typeof t},e.prototype.isManyRelation=function(t){return!!oe(t)&&!(t.length<1)},e.prototype.makeOneRelation=function(t,e){return this.isOneRelation(t)?new(e.getModelFromRecord(t)||e)(t):null},e.prototype.makeManyRelation=function(t,e){var n=this;return this.isManyRelation(t)?t.filter((function(t){return n.isOneRelation(t)})).map((function(t){return new(e.getModelFromRecord(t)||e)(t)})):[]},e}(fe),be=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.related=o.model.relation(n),o.foreignKey=r,o.localKey=i,o}return te(e,t),e.prototype.define=function(t){return t.one(this.related)},e.prototype.attach=function(t,e,n){e[this.localKey]||(e[this.localKey]=this.model.getIndexIdFromRecord(e));var r=n[this.related.entity]&&n[this.related.entity][t];r&&(r[this.foreignKey]=e[this.localKey])},e.prototype.make=function(t,e,n){return this.makeOneRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this.getRelation(t,this.related.entity,r);this.addEagerConstraints(i,e),this.match(e,i.get(),n)},e.prototype.addEagerConstraints=function(t,e){t.whereFk(this.foreignKey,this.getKeys(e,this.localKey))},e.prototype.match=function(t,e,n){var r=this,i=this.buildDictionary(e);t.forEach((function(t){var e=t[r.localKey],o=i[e];t[n]=o||null}))},e.prototype.buildDictionary=function(t){var e=this;return t.reduce((function(t,n){return t[n[e.foreignKey]]=n,t}),{})},e}(ge),we=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.parent=o.model.relation(n),o.foreignKey=r,o.ownerKey=i,o}return te(e,t),e.prototype.define=function(t){return t.one(this.parent)},e.prototype.attach=function(t,e,n){void 0===e[this.foreignKey]&&(e[this.foreignKey]=n[this.parent.entity]&&n[this.parent.entity][t]?n[this.parent.entity][t][this.ownerKey]:t)},e.prototype.make=function(t,e,n){return this.makeOneRelation(t,this.parent)},e.prototype.load=function(t,e,n,r){var i=this.getRelation(t,this.parent.entity,r);this.addEagerConstraints(i,e),this.match(e,i.get(),n)},e.prototype.addEagerConstraints=function(t,e){t.whereFk(this.ownerKey,this.getKeys(e,this.foreignKey))},e.prototype.match=function(t,e,n){var r=this,i=this.buildDictionary(e);t.forEach((function(t){var e=t[r.foreignKey],o=null!==e?i[e]:null;t[n]=o||null}))},e.prototype.buildDictionary=function(t){var e=this;return t.reduce((function(t,n){return t[n[e.ownerKey]]=n,t}),{})},e}(ge),Ke=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.related=o.model.relation(n),o.foreignKey=r,o.localKey=i,o}return te(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){var r=this;t.forEach((function(t){var i=n[r.related.entity];i&&i[t]&&void 0===i[t][r.foreignKey]&&(i[t][r.foreignKey]=e[r.localKey])}))},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this.getRelation(t,this.related.entity,r);this.addEagerConstraints(i,e),this.match(e,i.get(),n)},e.prototype.addEagerConstraints=function(t,e){t.whereFk(this.foreignKey,this.getKeys(e,this.localKey))},e.prototype.match=function(t,e,n){var r=this,i=this.buildDictionary(e);t.forEach((function(t){var e=t[r.localKey],o=i[e];t[n]=o||[]}))},e.prototype.buildDictionary=function(t){var e=this;return t.reduce((function(t,n){var r=n[e.foreignKey];return t[r]||(t[r]=[]),t[r].push(n),t}),{})},e}(ge),Oe=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.parent=o.model.relation(n),o.foreignKey=r,o.ownerKey=i,o}return te(e,t),e.prototype.define=function(t){return t.many(this.parent)},e.prototype.attach=function(t,e,n){var r=this;0!==t.length&&(e[this.foreignKey]=t.map((function(t){return r.parent.getIdFromRecord(n[r.parent.entity][t])})))},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.parent)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.parent.entity,r);this.addConstraintForHasManyBy(o,e);var a=this.mapSingleRelations(o.get(),this.ownerKey);e.forEach((function(t){var e=i.getRelatedRecords(a,t[i.foreignKey]);t[n]=e}))},e.prototype.addConstraintForHasManyBy=function(t,e){var n=this,r=e.reduce((function(t,e){return t.concat(e[n.foreignKey])}),[]);t.where(this.ownerKey,r)},e.prototype.getRelatedRecords=function(t,e){var n=[];return t.forEach((function(t,r){-1!==e.indexOf(r)&&n.push(t)})),n},e}(ge),Re=function(t){function e(e,n,r,i,o,a,u){var s=t.call(this,e)||this;return s.related=s.model.relation(n),s.through=s.model.relation(r),s.firstKey=i,s.secondKey=o,s.localKey=a,s.secondLocalKey=u,s}return te(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r),a=t.newQuery(this.through.entity);this.addEagerConstraintForThrough(a,e);var u=a.get();this.addEagerConstraintForRelated(o,u);var s=this.mapThroughRelations(u,o);e.forEach((function(t){var e=s[t[i.localKey]];t[n]=e||[]}))},e.prototype.addEagerConstraintForThrough=function(t,e){t.where(this.firstKey,this.getKeys(e,this.localKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.where(this.secondKey,this.getKeys(e,this.secondLocalKey))},e.prototype.mapThroughRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.secondKey);return t.reduce((function(t,e){var i=e[n.firstKey];t[i]||(t[i]=[]);var o=r.get(e[n.secondLocalKey]);return void 0===o||(t[i]=t[i].concat(o)),t}),{})},e}(ge),ke=function(t){function e(e,n,r,i,o,a,u){var s=t.call(this,e)||this;return s.pivotKey="pivot",s.related=s.model.relation(n),s.pivot=s.model.relation(r),s.foreignPivotKey=i,s.relatedPivotKey=o,s.parentKey=a,s.relatedKey=u,s}return te(e,t),e.prototype.as=function(t){return this.pivotKey=t,this},e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r),a=t.newQuery(this.pivot.entity);this.addEagerConstraintForPivot(a,e);var u=a.get();this.addEagerConstraintForRelated(o,u);var s=this.mapPivotRelations(u,o);e.forEach((function(t){var e=s[t[i.parentKey]];t[n]=e||[]}))},e.prototype.addEagerConstraintForPivot=function(t,e){t.whereFk(this.foreignPivotKey,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.whereFk(this.relatedKey,this.getKeys(e,this.relatedPivotKey))},e.prototype.mapPivotRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.relatedKey);return e.orders.length?this.mapRelationsByOrders(t,r,this.foreignPivotKey,this.relatedPivotKey):t.reduce((function(t,e){var i=e[n.foreignPivotKey];t[i]||(t[i]=[]);var o=r.get(e[n.relatedPivotKey]);return o&&(t[i]=t[i].concat(o.map((function(t){return t[n.pivotKey]=e,t})))),t}),{})},e.prototype.createPivots=function(t,e,n){var r=this;return ce.isArray(this.pivot.primaryKey)?(ce.forOwn(e[t.entity],(function(t){var i=t[n];void 0!==i&&0!==i.length&&r.createPivotRecord(e,t,i)})),e):e},e.prototype.createPivotRecord=function(t,e,n){var r=this;n.forEach((function(n){var i,o,a=e[r.parentKey],u=t[r.related.entity][n][r.relatedKey],s=JSON.stringify([r.pivot.primaryKey[0]===r.foreignPivotKey?a:u,r.pivot.primaryKey[1]===r.foreignPivotKey?a:u]),c=t[r.pivot.entity]?t[r.pivot.entity][s]:{},h=t[r.related.entity][n][r.pivotKey]||{};t[r.pivot.entity]=ee(ee({},t[r.pivot.entity]),((i={})[s]=ee(ee(ee({},c),h),((o={$id:s})[r.foreignPivotKey]=a,o[r.relatedPivotKey]=u,o)),i))}))},e}(ge),Me=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.id=n,i.type=r,i}return te(e,t),e.prototype.define=function(t){var e=this;return t.union((function(t,n){return n[e.type]}))},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){var r=e[this.type];try{var i=this.model.relation(r);return this.makeOneRelation(t,i)}catch(t){return null}},e.prototype.load=function(t,e,n,r){var i=this,o=this.getTypes(e).reduce((function(e,n){var o=i.getRelation(t,n,r);return e[n]=i.mapSingleRelations(o.get(),"$id"),e}),{});e.forEach((function(t){var e=t[i.id],r=t[i.type],a=o[r].get(String(e));t[n]=a||null}))},e.prototype.getTypes=function(t){var e=this;return t.reduce((function(t,n){var r=n[e.type];return!t.includes(r)&&t.push(r),t}),[])},e}(ge),Ie=function(t){function e(e,n,r,i,o){var a=t.call(this,e)||this;return a.related=a.model.relation(n),a.id=r,a.type=i,a.localKey=o,a}return te(e,t),e.prototype.define=function(t){return t.one(this.related)},e.prototype.attach=function(t,e,n){var r=n[this.related.entity][t];r[this.id]=r[this.id]||this.related.getIdFromRecord(e),r[this.type]=r[this.type]||this.model.entity},e.prototype.make=function(t,e,n){return this.makeOneRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r);this.addEagerConstraintForMorphOne(o,e,t.entity);var a=this.mapSingleRelations(o.get(),this.id);e.forEach((function(t){var e=a.get(t[i.localKey]);t[n]=e||null}))},e.prototype.addEagerConstraintForMorphOne=function(t,e,n){t.whereFk(this.type,n).whereFk(this.id,this.getKeys(e,this.localKey))},e}(ge),$e=function(t){function e(e,n,r,i,o){var a=t.call(this,e)||this;return a.related=a.model.relation(n),a.id=r,a.type=i,a.localKey=o,a}return te(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){var r=this,i=n[this.related.entity];t.forEach((function(t){var n=i[t];n[r.id]=n[r.id]||r.related.getIdFromRecord(e),n[r.type]=n[r.type]||r.model.entity}))},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r);this.addEagerConstraintForMorphMany(o,e,t.entity);var a=this.mapManyRelations(o.get(),this.id);e.forEach((function(t){var e=a.get(t[i.localKey]);t[n]=e||[]}))},e.prototype.addEagerConstraintForMorphMany=function(t,e,n){t.whereFk(this.type,n).whereFk(this.id,this.getKeys(e,this.localKey))},e}(ge),Fe=function(t){function e(e,n,r,i,o,a,u,s){var c=t.call(this,e)||this;return c.pivotKey="pivot",c.related=c.model.relation(n),c.pivot=c.model.relation(r),c.relatedId=i,c.id=o,c.type=a,c.parentKey=u,c.relatedKey=s,c}return te(e,t),e.prototype.as=function(t){return this.pivotKey=t,this},e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r),a=t.newQuery(this.pivot.entity);this.addEagerConstraintForPivot(a,e,t.entity);var u=a.get();this.addEagerConstraintForRelated(o,u);var s=this.mapPivotRelations(u,o);e.forEach((function(t){var e=s[t[i.parentKey]];t[n]=e||[]}))},e.prototype.addEagerConstraintForPivot=function(t,e,n){t.whereFk(this.type,n).whereFk(this.id,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.whereFk(this.relatedKey,this.getKeys(e,this.relatedId))},e.prototype.mapPivotRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.relatedKey);return e.orders.length?this.mapRelationsByOrders(t,r,this.id,this.relatedId):t.reduce((function(t,e){var i=e[n.id];t[i]||(t[i]=[]);var o=r.get(e[n.relatedId]);return void 0===o||0===o.length||(t[i]=t[i].concat(o.map((function(t){return t[n.pivotKey]=e,t})))),t}),{})},e.prototype.createPivots=function(t,e,n){var r=this;return ce.forOwn(e[t.entity],(function(i){var o=t.query().newQuery(r.pivot.entity).where(r.id,i[r.parentKey]).where(r.type,t.entity).get(),a=(i[n]||[]).filter((function(t){return!o.includes(t)}));ce.isArray(a)&&0!==a.length&&r.createPivotRecord(t,e,i,a)})),e},e.prototype.createPivotRecord=function(t,e,n,r){var i=this;r.forEach((function(r){var o,a,u=n[i.parentKey],s=e[i.related.entity][r][i.relatedKey],c="".concat(u,"_").concat(r,"_").concat(t.entity),h=e[i.related.entity][r][i.pivotKey]||{};e[i.pivot.entity]=ee(ee({},e[i.pivot.entity]),((o={})[c]=ee(ee({},h),((a={$id:c})[i.relatedId]=s,a[i.id]=u,a[i.type]=t.entity,a)),o))}))},e}(ge),Se=function(t){function e(e,n,r,i,o,a,u,s){var c=t.call(this,e)||this;return c.pivotKey="pivot",c.related=c.model.relation(n),c.pivot=c.model.relation(r),c.relatedId=i,c.id=o,c.type=a,c.parentKey=u,c.relatedKey=s,c}return te(e,t),e.prototype.as=function(t){return this.pivotKey=t,this},e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.make=function(t,e,n){return this.makeManyRelation(t,this.related)},e.prototype.load=function(t,e,n,r){var i=this,o=this.getRelation(t,this.related.entity,r),a=t.newQuery(this.pivot.entity);this.addEagerConstraintForPivot(a,e,this.related.entity);var u=a.get();this.addEagerConstraintForRelated(o,u);var s=this.mapPivotRelations(u,o);e.forEach((function(t){var e=s[t[i.parentKey]];t[n]=e||[]}))},e.prototype.addEagerConstraintForPivot=function(t,e,n){t.whereFk(this.type,n).whereFk(this.relatedId,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.whereFk(this.relatedKey,this.getKeys(e,this.id))},e.prototype.mapPivotRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.relatedKey);return e.orders.length?this.mapRelationsByOrders(t,r,this.relatedId,this.id):t.reduce((function(t,e){var i=e[n.relatedId];t[i]||(t[i]=[]);var o=r.get(e[n.id]);return void 0===o||0===o.length||(t[i]=t[i].concat(o.map((function(t){return t[n.pivotKey]=e,t})))),t}),{})},e.prototype.createPivots=function(t,e,n){var r=this;return ce.forOwn(e[t.entity],(function(t){var i=t[n];ce.isArray(i)&&r.createPivotRecord(e,t,i)})),e},e.prototype.createPivotRecord=function(t,e,n){var r=this;n.forEach((function(n){var i,o,a=e[r.parentKey],u="".concat(n,"_").concat(a,"_").concat(r.related.entity),s=t[r.related.entity][n][r.pivotKey]||{};t[r.pivot.entity]=ee(ee({},t[r.pivot.entity]),((i={})[u]=ee(ee({},s),((o={$id:u})[r.relatedId]=a,o[r.id]=r.model.getIdFromRecord(t[r.related.entity][n]),o[r.type]=r.related.entity,o)),i))}))},e}(ge),Ae={relations:!0};function Ee(t,e){void 0===e&&(e={}),e=ee(ee({},Ae),e);var n={},r=t.$fields();for(var i in r){var o=r[i],a=t[i];o instanceof ge?n[i]=e.relations?je(a):Pe(a):n[i]=xe(t[i])}return n}function xe(t){return null===t?null:oe(t)?t.map((function(t){return xe(t)})):"object"==typeof t?function(t){var e={};for(var n in t)e[n]=xe(t[n]);return e}(t):t}function je(t){return null===t?null:oe(t)?t.map((function(t){return t.$toJson()})):t.$toJson()}function Pe(t){return oe(t)?[]:null}var Ce=function(){function t(t){this.$id=null,this.$fill(t)}return t.fields=function(){return{}},t.attr=function(t,e){return new de(this,t,e)},t.string=function(t,e){return new pe(this,t,e)},t.number=function(t,e){return new ye(this,t,e)},t.boolean=function(t,e){return new ve(this,t,e)},t.uid=function(t){return new me(this,t)},t.increment=function(){return this.uid()},t.hasOne=function(t,e,n){return new be(this,t,e,this.localKey(n))},t.belongsTo=function(t,e,n){return new we(this,t,e,this.relation(t).localKey(n))},t.hasMany=function(t,e,n){return new Ke(this,t,e,this.localKey(n))},t.hasManyBy=function(t,e,n){return new Oe(this,t,e,this.relation(t).localKey(n))},t.hasManyThrough=function(t,e,n,r,i,o){return new Re(this,t,e,n,r,this.localKey(i),this.relation(e).localKey(o))},t.belongsToMany=function(t,e,n,r,i,o){return new ke(this,t,e,n,r,this.localKey(i),this.relation(t).localKey(o))},t.morphTo=function(t,e){return new Me(this,t,e)},t.morphOne=function(t,e,n,r){return new Ie(this,t,e,n,this.localKey(r))},t.morphMany=function(t,e,n,r){return new $e(this,t,e,n,this.localKey(r))},t.morphToMany=function(t,e,n,r,i,o,a){return new Fe(this,t,e,n,r,i,this.localKey(o),this.relation(t).localKey(a))},t.morphedByMany=function(t,e,n,r,i,o,a){return new Se(this,t,e,n,r,i,this.localKey(o),this.relation(t).localKey(a))},t.mutators=function(){return{}},t.types=function(){return{}},t.store=function(){return Xt.store},t.database=function(){return this.store().$db()},t.namespace=function(t){return"".concat(this.database().namespace,"/").concat(this.entity,"/").concat(t)},t.getters=function(t){return this.store().getters[this.namespace(t)]},t.dispatch=function(t,e){return this.store().dispatch(this.namespace(t),e)},t.commit=function(t){this.store().commit("".concat(this.database().namespace,"/$mutate"),{entity:this.entity,callback:t})},t.getFields=function(){return this.cachedFields||(this.cachedFields={}),this.cachedFields[this.entity]||(this.cachedFields[this.entity]=this.fields()),this.cachedFields[this.entity]},t.all=function(){return this.getters("all")()},t.find=function(t){return this.getters("find")(t)},t.findIn=function(t){return this.getters("findIn")(t)},t.query=function(){return this.getters("query")()},t.exists=function(){return this.query().exists()},t.new=function(){return this.dispatch("new")},t.create=function(t){return this.dispatch("create",t)},t.insert=function(t){return this.dispatch("insert",t)},t.update=function(t){return this.dispatch("update",t)},t.insertOrUpdate=function(t){return this.dispatch("insertOrUpdate",t)},t.delete=function(t){return this.dispatch("delete",t)},t.deleteAll=function(){return this.dispatch("deleteAll")},t.isPrimaryKey=function(t){return ce.isArray(this.primaryKey)?this.primaryKey.includes(t):this.primaryKey===t},t.isCompositePrimaryKey=function(){return ce.isArray(this.primaryKey)},t.getIdFromRecord=function(t){var e=this,n=this.primaryKey;if("string"==typeof n)return this.getIdFromValue(t[n]);var r=n.reduce((function(n,r){var i=e.getIdFromValue(t[r]);return null!==i&&n.push(i),n}),[]);return r.length===n.length?r:null},t.getIdFromValue=function(t){return"string"==typeof t&&""!==t||"number"==typeof t?t:null},t.getIndexIdFromRecord=function(t){var e=this.getIdFromRecord(t);return null===e?null:ce.isArray(e)?JSON.stringify(e):String(e)},t.localKey=function(t){return t||("string"==typeof this.primaryKey?this.primaryKey:"id")},t.getModelFromRecord=function(t){return t instanceof this?t.$self():this.getTypeModel(t[this.typeKey])},t.relation=function(t){return"string"!=typeof t?t:this.database().model(t)},t.pivotFields=function(){var t=[];return ce.forOwn(this.getFields(),(function(e,n){var r;(e instanceof ke||e instanceof Fe||e instanceof Se)&&t.push(((r={})[n]=e,r))})),t},t.hasPivotFields=function(){return this.pivotFields().length>0},t.hasTypes=function(){return Object.keys(this.types()).length>0},t.getTypeModel=function(t){var e=this.types()[t];return e||null},t.getTypeKeyValueFromModel=function(t){var e=t||this,n=this.types();for(var r in n)if(n[r].entity===e.entity)return r;return null},t.findRelationInSubTypes=function(t){var e=this.types();for(var n in e){var r=e[n].getFields();for(var i in r)if(i===t&&r[i]instanceof ge)return r[i]}return null},t.hydrate=function(t){return new this(t).$getAttributes()},t.prototype.$self=function(){return this.constructor},t.prototype.$primaryKey=function(){return this.$self().primaryKey},t.prototype.$fields=function(){return this.$self().getFields()},t.prototype.$setIndexId=function(t){return this.$id=t,this},t.prototype.$store=function(){return this.$self().store()},t.prototype.$namespace=function(t){return this.$self().namespace(t)},t.prototype.$getters=function(t){return this.$self().getters(t)},t.prototype.$dispatch=function(t,e){return ne(this,void 0,void 0,(function(){return re(this,(function(n){return[2,this.$self().dispatch(t,e)]}))}))},t.prototype.$all=function(){return this.$getters("all")()},t.prototype.$find=function(t){return this.$getters("find")(t)},t.prototype.$findIn=function(t){return this.$getters("findIn")(t)},t.prototype.$query=function(){return this.$getters("query")()},t.prototype.$create=function(t){return ne(this,void 0,void 0,(function(){return re(this,(function(e){return[2,this.$dispatch("create",t)]}))}))},t.prototype.$insert=function(t){return ne(this,void 0,void 0,(function(){return re(this,(function(e){return[2,this.$dispatch("insert",t)]}))}))},t.prototype.$update=function(t){return ne(this,void 0,void 0,(function(){return re(this,(function(e){return ce.isArray(t)||void 0!==t.where?[2,this.$dispatch("update",t)]:null===this.$self().getIndexIdFromRecord(t)?[2,this.$dispatch("update",{where:this.$self().getIdFromRecord(this),data:t})]:[2,this.$dispatch("update",t)]}))}))},t.prototype.$insertOrUpdate=function(t){return ne(this,void 0,void 0,(function(){return re(this,(function(e){return[2,this.$dispatch("insertOrUpdate",t)]}))}))},t.prototype.$save=function(){return ne(this,void 0,void 0,(function(){var t,e,n,r=this;return re(this,(function(i){switch(i.label){case 0:return t=this.$self().getFields(),e=Object.keys(t).reduce((function(e,n){return t[n]instanceof le&&(e[n]=r[n]),e}),{}),[4,this.$dispatch("insertOrUpdate",{data:e})];case 1:return n=i.sent(),this.$fill(n[this.$self().entity][0]),[2,this]}}))}))},t.prototype.$delete=function(){return ne(this,void 0,void 0,(function(){var t,e=this;return re(this,(function(n){return t=this.$primaryKey(),ce.isArray(t)?[2,this.$dispatch("delete",(function(n){return t.every((function(t){return n[t]===e[t]}))}))]:[2,this.$dispatch("delete",this[t])]}))}))},t.prototype.$deleteAll=function(){return ne(this,void 0,void 0,(function(){return re(this,(function(t){return[2,this.$dispatch("deleteAll")]}))}))},t.prototype.$fill=function(t){void 0===t&&(t={});var e=this.$fields();for(var n in e){var r=e[n],i=t[n];this[n]=r.make(i,t,n)}void 0!==t.$id&&this.$setIndexId(t.$id)},t.prototype.$generateId=function(){return this.$generatePrimaryId().$generateIndexId()},t.prototype.$generatePrimaryId=function(){var t=this,e=this.$self().primaryKey;return(ce.isArray(e)?e:[e]).forEach((function(e){void 0!==t[e]&&null!==t[e]||(t[e]=he.make())})),this},t.prototype.$generateIndexId=function(){return this.$setIndexId(this.$getIndexIdFromAttributes())},t.prototype.$getIndexIdFromAttributes=function(){return this.$self().getIndexIdFromRecord(this)},t.prototype.$getAttributes=function(){return(e=Ee(t=this,{relations:!1})).$id=t.$id,e;var t,e},t.prototype.$toJson=function(){return Ee(this)},t.primaryKey="id",t.typeKey="type",t.state={},t}(),_e={query:function(t,e,n,r){return function(){return r["".concat(t.$connection,"/query")](t.$name)}},all:function(t,e,n,r){return function(){return r["".concat(t.$connection,"/all")](t.$name)}},find:function(t,e,n,r){return function(e){return r["".concat(t.$connection,"/find")](t.$name,e)}},findIn:function(t,e,n,r){return function(e){return r["".concat(t.$connection,"/findIn")](t.$name,e)}}};var Be={new:function(t){return ne(this,void 0,void 0,(function(){var e,n;return re(this,(function(r){return e=t.state,n=e.$name,[2,t.dispatch("".concat(e.$connection,"/new"),{entity:n},{root:!0})]}))}))},create:function(t,e){return ne(this,void 0,void 0,(function(){var n,r;return re(this,(function(i){return n=t.state,r=n.$name,[2,t.dispatch("".concat(n.$connection,"/create"),ee(ee({},e),{entity:r}),{root:!0})]}))}))},insert:function(t,e){return ne(this,void 0,void 0,(function(){var n,r;return re(this,(function(i){return n=t.state,r=n.$name,[2,t.dispatch("".concat(n.$connection,"/insert"),ee(ee({},e),{entity:r}),{root:!0})]}))}))},update:function(t,e){return ne(this,void 0,void 0,(function(){var n,r;return re(this,(function(i){return n=t.state,r=n.$name,oe(e)||void 0===e.data?[2,t.dispatch("".concat(n.$connection,"/update"),{entity:r,data:e},{root:!0})]:[2,t.dispatch("".concat(n.$connection,"/update"),ee({entity:r},e),{root:!0})]}))}))},insertOrUpdate:function(t,e){return ne(this,void 0,void 0,(function(){var n,r;return re(this,(function(i){return n=t.state,r=n.$name,[2,t.dispatch("".concat(n.$connection,"/insertOrUpdate"),ee({entity:r},e),{root:!0})]}))}))},delete:function(t,e){return ne(this,void 0,void 0,(function(){var n,r,i;return re(this,(function(o){return n=t.state,r=n.$name,i=e,[2,t.dispatch("".concat(n.$connection,"/delete"),{entity:r,where:i},{root:!0})]}))}))},deleteAll:function(t){return ne(this,void 0,void 0,(function(){var e,n;return re(this,(function(r){return e=t.state,n=e.$name,[2,t.dispatch("".concat(e.$connection,"/deleteAll"),{entity:n},{root:!0})]}))}))}};function Te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function He(t,e,n){return e&&Te(t.prototype,e),n&&Te(t,n),t}function Ue(){return Ue=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ue.apply(this,arguments)}function ze(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Ne(t){return!(!t||"function"!=typeof t.hasOwnProperty||!(t.hasOwnProperty("__ownerID")||t._map&&t._map.hasOwnProperty("__ownerID")))}function Ve(t,e,n){return Object.keys(t).reduce((function(e,r){var i=""+r;return e.has(i)?e.set(i,n(e.get(i),t[i])):e}),e)}var De=function(){function t(t,e,n){if(void 0===e&&(e={}),void 0===n&&(n={}),!t||"string"!=typeof t)throw new Error("Expected a string key for Entity, but found "+t+".");var r=n,i=r.idAttribute,o=void 0===i?"id":i,a=r.mergeStrategy,u=void 0===a?function(t,e){return Ue({},t,e)}:a,s=r.processStrategy,c=void 0===s?function(t){return Ue({},t)}:s,h=r.fallbackStrategy,f=void 0===h?function(t,e){}:h;this._key=t,this._getId="function"==typeof o?o:function(t){return function(e){return Ne(e)?e.get(t):e[t]}}(o),this._idAttribute=o,this._mergeStrategy=u,this._processStrategy=c,this._fallbackStrategy=f,this.define(e)}var e=t.prototype;return e.define=function(t){this.schema=Object.keys(t).reduce((function(e,n){var r,i=t[n];return Ue({},e,((r={})[n]=i,r))}),this.schema||{})},e.getId=function(t,e,n){return this._getId(t,e,n)},e.merge=function(t,e){return this._mergeStrategy(t,e)},e.fallback=function(t,e){return this._fallbackStrategy(t,e)},e.normalize=function(t,e,n,r,i,o){var a=this,u=this.getId(t,e,n),s=this.key;if(s in o||(o[s]={}),u in o[s]||(o[s][u]=[]),o[s][u].some((function(e){return e===t})))return u;o[s][u].push(t);var c=this._processStrategy(t,e,n);return Object.keys(this.schema).forEach((function(e){if(c.hasOwnProperty(e)&&"object"==typeof c[e]){var n=a.schema[e],u="function"==typeof n?n(t):n;c[e]=r(c[e],c,e,u,i,o)}})),i(this,c,t,e,n),u},e.denormalize=function(t,e){var n=this;return Ne(t)?Ve(this.schema,t,e):(Object.keys(this.schema).forEach((function(r){if(t.hasOwnProperty(r)){var i=n.schema[r];t[r]=e(t[r],i)}})),t)},He(t,[{key:"key",get:function(){return this._key}},{key:"idAttribute",get:function(){return this._idAttribute}}]),t}(),We=function(){function t(t,e){e&&(this._schemaAttribute="string"==typeof e?function(t){return t[e]}:e),this.define(t)}var e=t.prototype;return e.define=function(t){this.schema=t},e.getSchemaAttribute=function(t,e,n){return!this.isSingleSchema&&this._schemaAttribute(t,e,n)},e.inferSchema=function(t,e,n){if(this.isSingleSchema)return this.schema;var r=this.getSchemaAttribute(t,e,n);return this.schema[r]},e.normalizeValue=function(t,e,n,r,i,o){var a=this.inferSchema(t,e,n);if(!a)return t;var u=r(t,e,n,a,i,o);return this.isSingleSchema||null==u?u:{id:u,schema:this.getSchemaAttribute(t,e,n)}},e.denormalizeValue=function(t,e){var n=Ne(t)?t.get("schema"):t.schema;return this.isSingleSchema||n?e((this.isSingleSchema?void 0:Ne(t)?t.get("id"):t.id)||t,this.isSingleSchema?this.schema:this.schema[n]):t},He(t,[{key:"isSingleSchema",get:function(){return!this._schemaAttribute}}]),t}(),Le=function(t){function e(e,n){if(!n)throw new Error('Expected option "schemaAttribute" not found on UnionSchema.');return t.call(this,e,n)||this}ze(e,t);var n=e.prototype;return n.normalize=function(t,e,n,r,i,o){return this.normalizeValue(t,e,n,r,i,o)},n.denormalize=function(t,e){return this.denormalizeValue(t,e)},e}(We),Ge=function(t){function e(){return t.apply(this,arguments)||this}ze(e,t);var n=e.prototype;return n.normalize=function(t,e,n,r,i,o){var a=this;return Object.keys(t).reduce((function(e,n,u){var s,c=t[n];return null!=c?Ue({},e,((s={})[n]=a.normalizeValue(c,t,n,r,i,o),s)):e}),{})},n.denormalize=function(t,e){var n=this;return Object.keys(t).reduce((function(r,i){var o,a=t[i];return Ue({},r,((o={})[i]=n.denormalizeValue(a,e),o))}),{})},e}(We),qe=function(t){return Array.isArray(t)?t:Object.keys(t).map((function(e){return t[e]}))},Qe=function(t,e,n,r,i,o,a){return t=function(t){if(Array.isArray(t)&&t.length>1)throw new Error("Expected schema definition to be a single schema, but found "+t.length+".");return t[0]}(t),qe(e).map((function(e,u){return i(e,n,r,t,o,a)}))},Je=function(t){function e(){return t.apply(this,arguments)||this}ze(e,t);var n=e.prototype;return n.normalize=function(t,e,n,r,i,o){var a=this;return qe(t).map((function(t,u){return a.normalizeValue(t,e,n,r,i,o)})).filter((function(t){return null!=t}))},n.denormalize=function(t,e){var n=this;return t&&t.map?t.map((function(t){return n.denormalizeValue(t,e)})):t},e}(We),Ye=function(t,e,n,r,i,o,a){var u=Ue({},e);return Object.keys(t).forEach((function(n){var r=t[n],s="function"==typeof r?r(e):r,c=i(e[n],e,n,s,o,a);null==c?delete u[n]:u[n]=c})),u},Xe=function(t,e,n){if(Ne(e))return Ve(t,e,n);var r=Ue({},e);return Object.keys(t).forEach((function(e){null!=r[e]&&(r[e]=n(r[e],t[e]))})),r},Ze=function(){function t(t){this.define(t)}var e=t.prototype;return e.define=function(t){this.schema=Object.keys(t).reduce((function(e,n){var r,i=t[n];return Ue({},e,((r={})[n]=i,r))}),this.schema||{})},e.normalize=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Ye.apply(void 0,[this.schema].concat(e))},e.denormalize=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xe.apply(void 0,[this.schema].concat(e))},t}(),tn=function t(e,n,r,i,o,a){return"object"==typeof e&&e?"object"!=typeof i||i.normalize&&"function"==typeof i.normalize?i.normalize(e,n,r,t,o,a):(Array.isArray(i)?Qe:Ye)(i,e,n,r,t,o,a):e},en={Array:Je,Entity:De,Object:Ze,Union:Le,Values:Ge},nn=function(){function t(){}return t.process=function(t,e){if(ce.isEmpty(e))return{};var n=t.database.schemas[t.model.entity];return function(t,e){if(!t||"object"!=typeof t)throw new Error('Unexpected input given to normalize. Expected type to be "object", found "'+(null===t?"null":typeof t)+'".');var n={},r=function(t){return function(e,n,r,i,o){var a=e.key,u=e.getId(r,i,o);a in t||(t[a]={});var s=t[a][u];t[a][u]=s?e.merge(s,n):n}}(n);return{entities:n,result:tn(t,t,null,e,r,{})}}(e,ce.isArray(e)?[n]:n).entities},t}(),rn=function(){function t(){}return t.process=function(t,e){return Object.keys(e).forEach((function(n){var r=t.getModel(n);r.hasPivotFields()&&ce.forOwn(r.pivotFields(),(function(t){ce.forOwn(t,(function(t,n){t.createPivots(r,e,n)}))}))})),e},t}(),on=function(){function t(){}return t.process=function(t,e){return ce.forOwn(e,(function(n,r){var i=t.getModel(r).fields();ce.forOwn(n,(function(t){ce.forOwn(t,(function(n,r){var o=i[r];o instanceof ge&&null!==n&&o.attach(n,t,e)}))}))})),e},t}(),an=function(){function t(){}return t.normalize=function(t,e){var n=nn.process(t,e);return n=on.process(t,n),n=rn.process(t,n)},t}(),un=function(){function t(){}return t.filter=function(t,e){var n=this;return 0===t.wheres.length?e:e.filter((function(e){return n.check(t,e)}))},t.check=function(t,e){var n=ce.groupBy(t.wheres,(function(t){return t.boolean})),r=this.getComparator(t,e),i=[];return n.and&&i.push(n.and.every(r)),n.or&&i.push(n.or.some(r)),-1!==i.indexOf(!0)},t.getComparator=function(t,e){var n=this;return function(r){if("function"==typeof r.field){var i=new dn(t.store,t.entity),o=n.executeWhereClosure(i,e,r.field);if("boolean"==typeof o)return o;var a=i.get();return!ce.isEmpty(a.filter((function(t){return t.$id===e.$id})))}return"function"==typeof r.value?r.value(e[r.field]):ce.isArray(r.value)?-1!==r.value.indexOf(e[r.field]):e[r.field]===r.value}},t.executeWhereClosure=function(t,e,n){if(3!==n.length)return n(e,t);var r=new t.model(e);return n(e,t,r)},t}(),sn=function(){function t(){}return t.filter=function(t,e){if(0===t.orders.length)return e;var n=t.orders.map((function(t){return t.key})),r=t.orders.map((function(t){return t.direction}));return ce.orderBy(e,n,r)},t}(),cn=function(){function t(){}return t.filter=function(t,e){return e.slice(t.offsetNumber,t.offsetNumber+t.limitNumber)},t}(),hn=function(){function t(){}return t.where=function(t,e){return un.filter(t,e)},t.orderBy=function(t,e){return sn.filter(t,e)},t.limit=function(t,e){return cn.filter(t,e)},t}(),fn=function(){function t(){}return t.with=function(t,e,n){var r=this;"*"!==e?oe(e)?e.forEach((function(e){return r.with(t,e,n)})):this.parseWithRelations(t,e.split("."),n):this.withAll(t,n)},t.withAll=function(t,e){var n=t.model.getFields();for(var r in n)n[r]instanceof ge&&this.with(t,r,e)},t.withAllRecursive=function(t,e){this.withAll(t,(function(t){e>0&&t.withAllRecursive(e-1)}))},t.setEagerLoad=function(t,e,n){void 0===n&&(n=null),t.load[e]||(t.load[e]=[]),n&&t.load[e].push(n)},t.parseWithRelations=function(t,e,n){var r=this,i=e[0];i.split("|").forEach((function(i){1!==e.length?r.setEagerLoad(t,i):r.setEagerLoad(t,i,n)})),1!==e.length&&(e.shift(),this.addNestedWiths(t,i,e,n))},t.addNestedWiths=function(t,e,n,r){this.setEagerLoad(t,e,(function(t){t.with(n.join("."),r)}))},t.eagerLoadRelations=function(t,e){var n=t.model.getFields();for(var r in t.load){var i=t.load[r],o=n[r];if(o instanceof ge)o.load(t,e,r,i);else if(t.model.hasTypes()){var a=t.model.findRelationInSubTypes(r);null!==a&&a.load(t,e,r,i)}}},t}(),ln=function(){function t(){}return t.has=function(t,e,n,r){this.setHas(t,e,"exists",n,r)},t.hasNot=function(t,e,n,r){this.setHas(t,e,"doesntExist",n,r)},t.whereHas=function(t,e,n){this.setHas(t,e,"exists",void 0,void 0,n)},t.whereHasNot=function(t,e,n){this.setHas(t,e,"doesntExist",void 0,void 0,n)},t.setHas=function(t,e,n,r,i,o){void 0===r&&(r=">="),void 0===i&&(i=1),void 0===o&&(o=null),"number"!=typeof r?t.have.push({relation:e,type:n,operator:r,count:i,constraint:o}):t.have.push({relation:e,type:n,operator:">=",count:r,constraint:o})},t.applyConstraints=function(t){if(0!==t.have.length){var e=t.newQuery();this.addHasWhereConstraints(t,e),this.addHasConstraints(t,e.get())}},t.addHasWhereConstraints=function(t,e){t.have.forEach((function(t){e.with(t.relation,t.constraint)}))},t.addHasConstraints=function(t,e){var n=this.getComparators(t),r=[];e.forEach((function(t){n.every((function(e){return e(t)}))&&r.push(t.$self().getIdFromRecord(t))})),t.whereIdIn(r)},t.getComparators=function(t){var e=this;return t.have.map((function(t){return e.getComparator(t)}))},t.getComparator=function(t){var e=this,n=this.getCountComparator(t.operator);return function(r){var i=e.getRelationshipCount(r[t.relation]),o=n(i,t.count);return"exists"===t.type?o:!o}},t.getRelationshipCount=function(t){return oe(t)?t.length:t?1:0},t.getCountComparator=function(t){switch(t){case"=":default:return function(t,e){return t===e};case">":return function(t,e){return t>e};case">=":return function(t,e){return t>=e};case"<":return function(t,e){return t>0&&t<e};case"<=":return function(t,e){return t>0&&t<=e}}},t}(),dn=function(){function t(t,e){this.appliedOnBase=!0,this.idFilter=null,this.cancelIdFilter=!1,this.joinedIdFilter=null,this.wheres=[],this.have=[],this.orders=[],this.offsetNumber=0,this.limitNumber=Math.pow(2,53)-1,this.load={},this.store=t,this.database=t.$db(),this.model=this.getModel(e),this.baseModel=this.getBaseModel(e),this.entity=e,this.baseEntity=this.baseModel.entity,this.rootState=this.database.getState(),this.state=this.rootState[this.baseEntity],this.appliedOnBase=this.baseEntity===this.entity}return t.deleteAll=function(t){var e=t.$db(),n=e.models();for(var r in n){e.getState()[r]&&new this(t,r).deleteAll()}},t.on=function(t,e){var n=++this.lastHookId;return this.hooks[t]||(this.hooks[t]=[]),this.hooks[t].push({id:n,callback:e}),n},t.off=function(t){var e=this;return Object.keys(this.hooks).some((function(n){var r=e.hooks[n],i=r.findIndex((function(e){return e.id===t}));return-1!==i&&(r.splice(i,1),!0)}))},t.prototype.self=function(){return this.constructor},t.prototype.newQuery=function(e){return e=e||this.entity,new t(this.store,e)},t.prototype.getModel=function(t){var e=t||this.entity;return this.database.model(e)},t.prototype.getModels=function(){return this.database.models()},t.prototype.getBaseModel=function(t){return this.database.baseModel(t)},t.prototype.all=function(){return this.get()},t.prototype.find=function(t){var e=this.state.data[this.normalizeIndexId(t)];return e?this.item(this.hydrate(e)):null},t.prototype.findIn=function(t){var e=this;if(!ce.isArray(t))return[];var n=t.reduce((function(t,n){var r=e.state.data[e.normalizeIndexId(n)];return r?(t.push(e.hydrate(r)),t):t}),[]);return this.collect(n)},t.prototype.get=function(){var t=this.select();return this.collect(t)},t.prototype.first=function(){var t=this.select();return 0===t.length?null:this.item(this.hydrate(t[0]))},t.prototype.last=function(){var t=this.select();return 0===t.length?null:this.item(this.hydrate(t[t.length-1]))},t.prototype.exists=function(){return this.select().length>0},t.prototype.where=function(t,e){return this.isIdfilterable(t)&&this.setIdFilter(e),this.wheres.push({field:t,value:e,boolean:"and"}),this},t.prototype.orWhere=function(t,e){return this.cancelIdFilter=!0,this.wheres.push({field:t,value:e,boolean:"or"}),this},t.prototype.whereId=function(t){return this.model.isCompositePrimaryKey()?this.where("$id",this.normalizeIndexId(t)):this.where(this.model.primaryKey,t)},t.prototype.whereIdIn=function(t){var e=this;if(this.model.isCompositePrimaryKey()){var n=t.reduce((function(t,n){return ie(ie([],t,!0),[e.normalizeIndexId(n)],!1)}),[]);return this.where("$id",n)}return this.where(this.model.primaryKey,t)},t.prototype.whereFk=function(t,e){var n=ce.isArray(e)?e:[e];return t===this.model.primaryKey?(this.setJoinedIdFilter(n),this):(this.where(t,n),this)},t.prototype.normalizeIndexId=function(t){if(this.model.isCompositePrimaryKey()){if(!ce.isArray(t))throw new Error("[Vuex ORM] Entity `"+this.entity+"` is configured with a composite primary key and expects an array value but instead received: "+JSON.stringify(t));return JSON.stringify(t)}if(ce.isArray(t))throw new Error("[Vuex ORM] Entity `"+this.entity+"` expects a single value but instead received: "+JSON.stringify(t));return t},t.prototype.isIdfilterable=function(t){return(t===this.model.primaryKey||"$id"===t)&&!this.cancelIdFilter},t.prototype.setIdFilter=function(t){var e=this,n=ce.isArray(t)?t:[t];null!==this.idFilter?this.idFilter=new Set(n.filter((function(t){return e.idFilter.has(t)}))):this.idFilter=new Set(n)},t.prototype.setJoinedIdFilter=function(t){var e=this;null!==this.joinedIdFilter?this.joinedIdFilter=new Set(t.filter((function(t){return e.joinedIdFilter.has(t)}))):this.joinedIdFilter=new Set(t)},t.prototype.orderBy=function(t,e){return void 0===e&&(e="asc"),this.orders.push({key:t,direction:e}),this},t.prototype.offset=function(t){return this.offsetNumber=t,this},t.prototype.limit=function(t){return this.limitNumber=t,this},t.prototype.with=function(t,e){return void 0===e&&(e=null),fn.with(this,t,e),this},t.prototype.withAll=function(t){return void 0===t&&(t=null),fn.withAll(this,t),this},t.prototype.withAllRecursive=function(t){return void 0===t&&(t=3),fn.withAllRecursive(this,t),this},t.prototype.has=function(t,e,n){return ln.has(this,t,e,n),this},t.prototype.hasNot=function(t,e,n){return ln.hasNot(this,t,e,n),this},t.prototype.whereHas=function(t,e){return ln.whereHas(this,t,e),this},t.prototype.whereHasNot=function(t,e){return ln.whereHasNot(this,t,e),this},t.prototype.records=function(){var t=this;return this.finalizeIdFilter(),this.getIdsToLookup().reduce((function(e,n){var r=t.state.data[n];if(!r)return e;var i=t.hydrate(r);return t.appliedOnBase||t.model.entity===i.$self().entity?(e.push(i),e):e}),[])},t.prototype.finalizeIdFilter=function(){this.cancelIdFilter&&null!==this.idFilter&&(this.where(this.model.isCompositePrimaryKey()?"$id":this.model.primaryKey,Array.from(this.idFilter.values())),this.idFilter=null)},t.prototype.getIdsToLookup=function(){var t=this;return this.idFilter&&this.joinedIdFilter?Array.from(this.idFilter.values()).filter((function(e){return t.joinedIdFilter.has(e)})):this.idFilter||this.joinedIdFilter?Array.from((this.idFilter||this.joinedIdFilter).values()):Object.keys(this.state.data)},t.prototype.select=function(){ln.applyConstraints(this);var t=this.records();return t=this.executeSelectHook("beforeSelect",t),t=this.filterWhere(t),t=this.executeSelectHook("afterWhere",t),t=this.filterOrderBy(t),t=this.executeSelectHook("afterOrderBy",t),t=this.filterLimit(t),t=this.executeSelectHook("afterLimit",t)},t.prototype.filterWhere=function(t){return hn.where(this,t)},t.prototype.filterOrderBy=function(t){return hn.orderBy(this,t)},t.prototype.filterLimit=function(t){return hn.limit(this,t)},t.prototype.count=function(){return this.get().length},t.prototype.max=function(t){var e=this.get().reduce((function(e,n){return"number"==typeof n[t]&&e.push(n[t]),e}),[]);return 0===e.length?0:Math.max.apply(Math,e)},t.prototype.min=function(t){var e=this.get().reduce((function(e,n){return"number"==typeof n[t]&&e.push(n[t]),e}),[]);return 0===e.length?0:Math.min.apply(Math,e)},t.prototype.sum=function(t){return this.get().reduce((function(e,n){return"number"==typeof n[t]&&(e+=n[t]),e}),0)},t.prototype.item=function(t){return Object.keys(this.load).length>0&&fn.eagerLoadRelations(this,[t]),t},t.prototype.collect=function(t){var e=this;return t.length<1?[]:(Object.keys(this.load).length>0&&(t=t.map((function(t){return new(e.model.getModelFromRecord(t))(t)})),fn.eagerLoadRelations(this,t)),t)},t.prototype.new=function(){var t=(new this.model).$generateId();return this.commitInsert(t.$getAttributes()),t},t.prototype.create=function(t,e){return this.persist("create",t,e)},t.prototype.createRecords=function(t){return this.deleteAll(),this.insertRecords(t)},t.prototype.insert=function(t,e){return this.persist("insert",t,e)},t.prototype.insertRecords=function(t){var e=this.mapHydrateRecords(t);return e=this.executeMutationHooks("beforeCreate",e),this.commitInsertRecords(this.convertCollectionToRecords(e)),this.executeMutationHooks("afterCreate",e),e},t.prototype.update=function(t,e,n){if(ce.isArray(t))return this.persist("update",t,n);if("function"==typeof t){if(!e)throw new Error("You must specify `where` to update records by specifying `data` as a closure.");return"function"==typeof e?this.updateByCondition(t,e):this.updateById(t,e)}if("function"==typeof e)return this.updateByCondition(t,e);if(!e)return this.persist("update",t,n);if(this.model.isCompositePrimaryKey()&&!ce.isArray(e))throw new Error("[Vuex ORM] You can't specify `where` value as `string` or `number` when you have a composite key defined in your model. Please include composite keys to the `data` fields.");return this.updateById(t,e)},t.prototype.updateRecords=function(t){var e=this.hydrateRecordsByMerging(t);return this.performUpdate(e)},t.prototype.updateById=function(t,e){var n;e="number"==typeof e?e.toString():this.normalizeIndexId(e);var r=this.state.data[e];if(!r)return null;var i=this.hydrate(r),o=((n={})[e]=this.processUpdate(t,i),n);return this.performUpdate(o),o[e]},t.prototype.updateByCondition=function(t,e){var n=this,r=Object.keys(this.state.data).reduce((function(r,i){var o=n.hydrate(n.state.data[i]);return e(o)?(r[i]=n.processUpdate(t,o),r):r}),{});return this.performUpdate(r)},t.prototype.processUpdate=function(t,e){return"function"==typeof t?(t(e),e):e.constructor!==this.model&&e instanceof Ce?this.hydrate(ee(ee({},e),t),e.constructor):this.hydrate(ee(ee({},e),t))},t.prototype.performUpdate=function(t){var e=this,n=this.buildHooks("beforeUpdate"),r=this.buildHooks("afterUpdate"),i=[],o=function(o){var u=t[o];if(n.some((function(t){return!1===t(u,null,e.entity)})))return"continue";a.commitUpdate(String(u.$getIndexIdFromAttributes()),u.$getAttributes()),r.forEach((function(t){t(u,null,e.entity)})),i.push(u)},a=this;for(var u in t)o(u);return i},t.prototype.insertOrUpdate=function(t,e){return this.persist("insertOrUpdate",t,e)},t.prototype.insertOrUpdateRecords=function(t){var e=this,n={},r={};return Object.keys(t).forEach((function(i){var o=t[i];e.state.data[i]?r[i]=o:n[i]=o})),ie(ie([],this.insertRecords(n),!0),this.updateRecords(r),!0)},t.prototype.persist=function(t,e,n){var r=this,i=ce.cloneDeep(e),o=this.normalize(i);return ce.isEmpty(o)?("create"===t&&this.emptyState(),{}):Object.entries(o).reduce((function(e,i){var o=i[0],a=i[1],u=r.newQuery(o),s=r.getPersistMethod(o,n,t),c=u.persistRecords(s,a);return c.length>0&&(e[o]=c),e}),{})},t.prototype.persistRecords=function(t,e){switch(t){case"create":return this.createRecords(e);case"insert":return this.insertRecords(e);case"update":return this.updateRecords(e);case"insertOrUpdate":return this.insertOrUpdateRecords(e)}},t.prototype.getPersistMethod=function(t,e,n){return e.create&&e.create.includes(t)?"create":e.insert&&e.insert.includes(t)?"insert":e.update&&e.update.includes(t)?"update":e.insertOrUpdate&&e.insertOrUpdate.includes(t)?"insertOrUpdate":n},t.prototype.delete=function(t){return"function"==typeof t?this.deleteByCondition(t):this.deleteById(t)},t.prototype.deleteAll=function(){var t=this;return this.appliedOnBase?this.deleteByCondition((function(){return!0})):this.deleteByCondition((function(e){return e.$self().entity===t.model.entity}))},t.prototype.deleteById=function(t){var e=this.find(t);return e?this.deleteByCondition((function(t){return t.$id===e.$id}))[0]:null},t.prototype.deleteByCondition=function(t){var e=this.mapHydrateAndFilterRecords(this.state.data,t);return 0===(e=this.executeMutationHooks("beforeDelete",e)).length?[]:(this.commitDelete(e.map((function(t){return t.$id}))),this.executeMutationHooks("afterDelete",e),e)},t.prototype.commit=function(t,e){this.store.commit("".concat(this.database.namespace,"/").concat(t),ee({entity:this.baseEntity},e))},t.prototype.commitInsert=function(t){this.commit("insert",{record:t})},t.prototype.commitUpdate=function(t,e){this.commit("update",{newId:t,record:e})},t.prototype.commitInsertRecords=function(t){this.commit("insertRecords",{records:t})},t.prototype.commitDelete=function(t){this.commit("delete",{id:t})},t.prototype.normalize=function(t){return an.normalize(this,t)},t.prototype.hydrate=function(t,e){var n;if(e)return new e(t);var r=this.model.getModelFromRecord(t);if(null!==r)return new r(t);if(!this.appliedOnBase&&void 0===t[this.model.typeKey]){var i=this.model.getTypeKeyValueFromModel();return t=ee(ee({},t),((n={})[this.model.typeKey]=i,n)),new this.model(t)}return new(this.getBaseModel(this.entity))(t)},t.prototype.hydrateRecordsByMerging=function(t){var e=this;return Object.keys(t).reduce((function(n,r){var i=e.state.data[r];if(!i)return n;var o=t[r],a=e.model.getModelFromRecord(i);return null===a?(n[r]=e.hydrate(ee(ee({},i),o)),n):(n[r]=e.hydrate(ee(ee({},i),o),a),n)}),{})},t.prototype.mapHydrateRecords=function(t){var e=this;return ce.map(t,(function(t){return e.hydrate(t)}))},t.prototype.mapHydrateAndFilterRecords=function(t,e){var n=[];for(var r in t){var i=this.hydrate(t[r]);e(i)&&n.push(i)}return n},t.prototype.convertCollectionToRecords=function(t){return t.reduce((function(t,e){return t[e.$id]=e.$getAttributes(),t}),{})},t.prototype.emptyState=function(){this.deleteAll()},t.prototype.buildHooks=function(t){var e=this.getGlobalHookAsArray(t),n=this.model[t];return n&&e.push(n.bind(this.model)),e},t.prototype.getGlobalHookAsArray=function(t){var e=this,n=this.self().hooks[t];return n?n.map((function(t){return t.callback.bind(e)})):[]},t.prototype.executeMutationHooks=function(t,e){var n=this,r=this.buildHooks(t);return 0===r.length?e:e.filter((function(t){return!r.some((function(e){return!1===e(t,null,n.entity)}))}))},t.prototype.executeSelectHook=function(t,e){var n=this;return this.buildHooks(t).reduce((function(t,r){return r(e,n.entity)}),e)},t.hooks={},t.lastHookId=0,t}();var pn={query:function(t){var e=this;return function(t){return new dn(e,t)}},all:function(t){var e=this;return function(t){return new dn(e,t).all()}},find:function(t){var e=this;return function(t,n){return new dn(e,t).find(n)}},findIn:function(t){var e=this;return function(t,n){return new dn(e,t).findIn(n)}}},yn=function(){function t(){}return t.createPersistOptions=function(t){return{create:t.create,insert:t.insert,update:t.update,insertOrUpdate:t.insertOrUpdate}},t}();var vn={new:function(t,e){return ne(this,void 0,void 0,(function(){return re(this,(function(t){return[2,new dn(this,e.entity).new()]}))}))},create:function(t,e){return ne(this,void 0,void 0,(function(){var t,n,r;return re(this,(function(i){return t=e.entity,n=e.data,r=yn.createPersistOptions(e),[2,new dn(this,t).create(n,r)]}))}))},insert:function(t,e){return ne(this,void 0,void 0,(function(){var t,n,r;return re(this,(function(i){return t=e.entity,n=e.data,r=yn.createPersistOptions(e),[2,new dn(this,t).insert(n,r)]}))}))},update:function(t,e){return ne(this,void 0,void 0,(function(){var t,n,r,i;return re(this,(function(o){return t=e.entity,n=e.data,r=e.where||null,i=yn.createPersistOptions(e),[2,new dn(this,t).update(n,r,i)]}))}))},insertOrUpdate:function(t,e){return ne(this,void 0,void 0,(function(){var t,n,r;return re(this,(function(i){return t=e.entity,n=e.data,r=yn.createPersistOptions(e),[2,new dn(this,t).insertOrUpdate(n,r)]}))}))},delete:function(t,e){return ne(this,void 0,void 0,(function(){var t,n;return re(this,(function(r){return t=e.entity,n=e.where,[2,new dn(this,t).delete(n)]}))}))},deleteAll:function(t,e){return ne(this,void 0,void 0,(function(){return re(this,(function(t){return e&&e.entity?(new dn(this,e.entity).deleteAll(),[2]):(dn.deleteAll(this),[2])}))}))}},mn=function(){function t(t,e,n){this.store=t,this.connection=e,this.entity=n,this.rootState=this.store.state[e],this.state=this.rootState[n]}return t.prototype.insert=function(t){var e;this.state.data=ee(ee({},this.state.data),((e={})[t.$id]=t,e))},t.prototype.insertRecords=function(t){this.state.data=ee(ee({},this.state.data),t)},t.prototype.update=function(t,e){var n;delete this.state.data[e.$id],e.$id=t,this.state.data=ee(ee({},this.state.data),((n={})[e.$id]=e,n))},t.prototype.delete=function(t){var e={};for(var n in this.state.data)t.includes(n)||(e[n]=this.state.data[n]);this.state.data=e},t}();var gn={$mutate:function(t,e){e.callback(t[e.entity])},insert:function(t,e){var n=e.entity,r=e.record;new mn(this,t.$name,n).insert(r)},insertRecords:function(t,e){var n=e.entity,r=e.records;new mn(this,t.$name,n).insertRecords(r)},update:function(t,e){var n=e.entity,r=e.record,i=e.newId;new mn(this,t.$name,n).update(i,r)},delete:function(t,e){var n=e.entity,r=e.id;new mn(this,t.$name,n).delete(r)}},bn=function(){function t(){}return t.create=function(t){var e=this;return function(n,r,i){return e.generateIds(n,t),e.generateIndexId(n,t)}},t.generateIds=function(t,e){(oe(e.primaryKey)?e.primaryKey:[e.primaryKey]).forEach((function(n){if(void 0===t[n]||null===t[n]){var r=e.getFields()[n];t[n]=r instanceof me?r.make():he.make()}}))},t.generateIndexId=function(t,e){return t.$id=e.getIndexIdFromRecord(t),t.$id},t}(),wn=function(){function t(t){var e=this;this.schemas={},this.model=t;var n=t.database().models();Object.keys(n).forEach((function(t){e.one(n[t])}))}return t.create=function(t){return new this(t).one()},t.prototype.one=function(t){if(t=t||this.model,this.schemas[t.entity])return this.schemas[t.entity];var e=new en.Entity(t.entity,{},{idAttribute:bn.create(t)});this.schemas[t.entity]=e;var n=this.definition(t);return e.define(n),e},t.prototype.many=function(t){return new en.Array(this.one(t))},t.prototype.union=function(t){return new en.Union(this.schemas,t)},t.prototype.definition=function(t){var e=this,n=t.getFields();return Object.keys(n).reduce((function(t,r){var i=n[r];return i instanceof ge&&(t[r]=i.define(e)),t}),{})},t}(),Kn=function(){function t(){this.entities=[],this.schemas={},this.isStarted=!1}return t.prototype.start=function(t,e){this.store=t,this.namespace=e,this.connect(),this.registerModules(),this.createSchema(),this.isStarted=!0},t.prototype.register=function(t,e){void 0===e&&(e={}),this.checkModelTypeMappingCapability(t);var n={name:t.entity,base:t.baseEntity||t.entity,model:this.createBindingModel(t),module:e};this.entities.push(n),this.isStarted&&(this.registerModule(n),this.registerSchema(n))},t.prototype.model=function(t){var e="string"==typeof t?t:t.entity,n=this.entities.find((function(t){return t.name===e})),r=n?n.model:null;if(!r)throw new Error("[Vuex ORM] Could not find the model `".concat(e,"`. Please check if you ")+"have registered the model to the database.");return r},t.prototype.baseModel=function(t){var e="string"==typeof t?t:t.entity,n=this.entities.find((function(t){return t.name===e})),r=n?this.model(n.base):null;if(!r)throw new Error("[Vuex ORM] Could not find the model `".concat(e,"`. Please check if you ")+"have registered the model to the database.");return r},t.prototype.models=function(){return this.entities.reduce((function(t,e){return t[e.name]=e.model,t}),{})},t.prototype.baseModels=function(){var t=this;return this.entities.reduce((function(e,n){return e[n.name]=t.model(n.base),e}),{})},t.prototype.module=function(t){var e=this.modules()[t];if(!e)throw new Error("[Vuex ORM] Could not find the module `".concat(t,"`. Please check if you ")+"have registered the module to the database.");return e},t.prototype.modules=function(){return this.entities.reduce((function(t,e){return t[e.name]=e.module,t}),{})},t.prototype.getState=function(){return this.store.state[this.namespace]},t.prototype.createBindingModel=function(t){var e,n=this;try{e=new Function("model","\n        'use strict';\n        return class ".concat(t.name," extends model {}\n      "))(t)}catch(n){e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return te(e,t),e}(t),Object.defineProperty(e,"name",{get:function(){return t.name}})}return Object.defineProperty(e,"store",{value:function(){return n.store}}),e},t.prototype.registerModules=function(){this.store.registerModule(this.namespace,this.createModule())},t.prototype.registerModule=function(t){this.store.registerModule([this.namespace,t.name],this.createSubModule(t))},t.prototype.createModule=function(){var t=this,e=this.createRootModule();return this.entities.forEach((function(n){e.modules[n.name]=t.createSubModule(n)})),e},t.prototype.createRootModule=function(){return{namespaced:!0,state:this.createRootState(),getters:this.createRootGetters(),actions:this.createRootActions(),mutations:this.createRootMutations(),modules:{}}},t.prototype.createRootState=function(){var t=this;return function(){return{$name:t.namespace}}},t.prototype.createRootGetters=function(){var t=this;return ue(pn,(function(e,n){return pn[n].bind(t.store)}))},t.prototype.createRootActions=function(){return vn},t.prototype.createRootMutations=function(){return gn},t.prototype.createSubModule=function(t){return{namespaced:!0,state:this.createSubState(t),getters:this.createSubGetters(t),actions:this.createSubActions(t),mutations:this.createSubMutations(t)}},t.prototype.createSubState=function(t){var e=this,n=t.name,r=t.model,i=t.module,o="function"==typeof r.state?r.state():r.state,a="function"==typeof i.state?i.state():i.state;return function(){return ee(ee(ee({},o),a),{$connection:e.namespace,$name:n,data:{}})}},t.prototype.createSubGetters=function(t){return ee(ee({},_e),t.module.getters)},t.prototype.createSubActions=function(t){return ee(ee({},Be),t.module.actions)},t.prototype.createSubMutations=function(t){var e;return null!==(e=t.module.mutations)&&void 0!==e?e:{}},t.prototype.createSchema=function(){var t=this;this.entities.forEach((function(e){t.registerSchema(e)}))},t.prototype.registerSchema=function(t){this.schemas[t.name]=wn.create(t.model)},t.prototype.connect=function(){var t=this;this.store.$db=function(){return t}},t.prototype.checkModelTypeMappingCapability=function(t){},t}();return{install:function(t,e){void 0===e&&(e={});var n=e.namespace||"entities";return function(e){t.start(e,n),Xt.register(e)}},use:function(t,e){void 0===e&&(e={});var n={Model:Ce,Attribute:fe,Type:le,Attr:de,String:pe,Number:ye,Boolean:ve,Uid:me,Relation:ge,HasOne:be,BelongsTo:we,HasMany:Ke,HasManyBy:Oe,BelongsToMany:ke,HasManyThrough:Re,MorphTo:Me,MorphOne:Ie,MorphMany:$e,MorphToMany:Fe,MorphedByMany:Se,Getters:_e,Actions:Be,RootGetters:pn,RootActions:vn,RootMutations:gn,Query:dn,Database:Kn};t.install(n,e)},Container:Xt,Database:Kn,Model:Ce,Attribute:fe,Type:le,Attr:de,String:pe,Number:ye,Boolean:ve,Uid:me,Relation:ge,HasOne:be,BelongsTo:we,HasMany:Ke,HasManyBy:Oe,BelongsToMany:ke,HasManyThrough:Re,MorphTo:Me,MorphOne:Ie,MorphMany:$e,MorphToMany:Fe,MorphedByMany:Se,Getters:_e,Actions:Be,RootGetters:pn,RootActions:vn,RootMutations:gn,Query:dn}}();
